<!DOCTYPE html>
<html>

<head>
   <title>Trade</title>
   <link href="css/font-awesome.min.css" rel="stylesheet">
   <link href="css/bootstrap.css" rel="stylesheet">
   <script src="js/jquery.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <link rel="stylesheet" type="text/css" href="css/w2ui.min.css" />
   <script type="text/javascript" src="js/w2ui.min.js"></script>
   <script type="text/javascript" src="js/dialog.js"></script>
   <style>
      #depthEFP {
         visibility: hidden;
      }
      #depthEFPTranspose {
         visibility: visible;
      }
      .tab {
         position: absolute;
         top: 29px;
         left: 0px;
         bottom: 0px;
         right: 0px;
         border: none;
         border-top: 0px;
         display: none;
         padding: 0px;
         overflow: hidden;
         background-color: #F5F6F7;
      }
   </style>
   <script>
      var counter = setInterval(transposeDepth, 1000);

      function transposeDepth() {
         var table = document.getElementById("depthEFP");
         var height = table.rows.length;
         var depth = [];

         for (var i = 0; i < height; i++) {
            var width = table.rows[0].cells.length;

            for (var j = 0; j < 10; j++) {
               var level = {};

			   level['product'] = document.getElementById("depthEFP_product_" + i).innerHTML;
               level['bidPrice'] = document.getElementById("depthEFP_bidPrice" + j + "_" + i).innerHTML;
               level['offerPrice'] = document.getElementById("depthEFP_offerPrice" + j + "_" + i).innerHTML;
               level['bidVolume'] = document.getElementById("depthEFP_bidVolume" + j + "_" + i).innerHTML;
               level['offerVolume'] = document.getElementById("depthEFP_offerVolume" + j + "_" + i).innerHTML;
               level['bidCompany'] = document.getElementById("depthEFP_bidCompany" + j + "_" + i).innerHTML;
               level['offerCompany'] = document.getElementById("depthEFP_offerCompany" + j + "_" + i).innerHTML;

               depth[j] = level;
            }
         }
         var transpose = document.getElementById("depthEFPTranspose");
         var actual = transpose.rows.length;
         var required = depth.length;

         if (required > actual) {
            for (var i = actual; i <= required; i++) {
               transpose.insertRow(i);

               for (var j = 0; j < 7; j++) {
                  transpose.rows[i].insertCell(j);
               }
            }
         }
         for (var i = 0; i < depth.length; i++) {
            transpose.rows[i].cells[0].innerHTML = depth[i].bidCompany;
            transpose.rows[i].cells[1].innerHTML = depth[i].bidVolume;
            transpose.rows[i].cells[2].innerHTML = depth[i].bidPrice;
            transpose.rows[i].cells[3].innerHTML = "<b>" + depth[i].product + "</b>";            
            transpose.rows[i].cells[4].innerHTML = depth[i].offerPrice;
            transpose.rows[i].cells[5].innerHTML = depth[i].offerVolume;
            transpose.rows[i].cells[6].innerHTML = depth[i].offerCompany;
         }
      }
   </script>
</head>

<body style="height: 100%; margin: 0; background-color: #ff0000;">

   <body>
      <div id="tab-example">
         <div id="tabs" style="width: 100%; height: 29px;"></div>
         <div id="tab1" class="tab">
            <table border="1" height="100%" width="100%">
               <tr height='92%' align="middle">
                  <td colspan='2'>
                     <table height="100%" width='100%'>
                        <tr align="center">
                           <td>
                              <table border="1" id="depthEFPTranspose" />
                              <table id="depthEFP" />
                           </td>
                        </tr>
                     </table>
                  </td>
               </tr>
               <tr height='8%'>
                  <td width='100%' />
                  <td>
                     <button class="btn">Cancel</button>
                  </td>
                  <td>&nbsp;&nbsp;&nbsp;</td>

               </tr>
            </table>
         </div>
         <div id="tab2" class="tab">
            <table border='1' height="100%" width="100%">
               <tr>
                  <td>Hi</td>
               </tr>
            </table>
         </div>
         <div id="tab3" class="tab">
            <table border='1' height="100%" width="100%">
               <tr>
                  <td>Hi</td>
               </tr>
            </table>
         </div>
         <div id="tab4" class="tab">
            <table border='1' height="100%" width="100%">
               <tr>
                  <td>Hi</td>
               </tr>
            </table>
         </div>
      </div>
      <script type="text/javascript">
         var config = {
            tabs: {
               name: 'tabs',
               active: 'tab1',
               tabs: [{
                  id: 'tab1',
                  caption: 'Trade Request'
               }, {
                  id: 'tab2',
                  caption: 'Quote Request'
               }, {
                  id: 'tab3',
                  caption: 'My Allocations'
               }, {
                  id: 'tab4',
                  caption: 'Ticketing'
               }, ],
               onClick: function(event) {
                  $('#tab-example .tab').hide();
                  $('#tab-example #' + event.target).show();
               }
            }
         }
         $(function() {
            $('#tabs').w2tabs(config.tabs);
            $('#tab1').show();
         });
      </script>

   </body>

</html>
